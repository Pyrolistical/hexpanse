var In=Object.defineProperty;var f=(V,he)=>In(V,"name",{value:he,configurable:!0});(function(){"use strict";var V=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function he(m){var R=m.default;if(typeof R=="function"){var _=f(function(){return R.apply(this,arguments)},"a");_.prototype=R.prototype}else _={};return Object.defineProperty(_,"__esModule",{value:!0}),Object.keys(m).forEach(function(y){var I=Object.getOwnPropertyDescriptor(m,y);Object.defineProperty(_,y,I.get?I:{enumerable:!0,get:function(){return m[y]}})}),_}f(he,"getAugmentedNamespace");var ur=f(function(m,R){R||(R={}),typeof R=="function"&&(R={cmp:R});var _=typeof R.cycles=="boolean"?R.cycles:!1,y=R.cmp&&function(A){return function(S){return function(d,a){var s={key:d,value:S[d]},v={key:a,value:S[a]};return A(s,v)}}}(R.cmp),I=[];return f(function A(S){if(S&&S.toJSON&&typeof S.toJSON=="function"&&(S=S.toJSON()),S!==void 0){if(typeof S=="number")return isFinite(S)?""+S:"null";if(typeof S!="object")return JSON.stringify(S);var d,a;if(Array.isArray(S)){for(a="[",d=0;d<S.length;d++)d&&(a+=","),a+=A(S[d])||"null";return a+"]"}if(S===null)return"null";if(I.indexOf(S)!==-1){if(_)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=I.push(S)-1,v=Object.keys(S).sort(y&&y(S));for(a="",d=0;d<v.length;d++){var i=v[d],c=A(S[i]);!c||(a&&(a+=","),a+=JSON.stringify(i)+":"+c)}return I.splice(s,1),"{"+a+"}"}},"stringify")(m)},"fastJsonStableStringify");function ce(m){throw new Error('Could not dynamically require "'+m+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}f(ce,"commonjsRequire");var ye={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(m,R){(function(_){m.exports=_()})(function(){return f(function _(y,I,A){function S(s,v){if(!I[s]){if(!y[s]){var i=typeof ce=="function"&&ce;if(!v&&i)return i(s,!0);if(d)return d(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var g=I[s]={exports:{}};y[s][0].call(g.exports,function(E){var $=y[s][1][E];return S($||E)},g,g.exports,_,y,I,A)}return I[s].exports}f(S,"s");for(var d=typeof ce=="function"&&ce,a=0;a<A.length;a++)S(A[a]);return S},"e")({1:[function(_,y,I){(function(A){var S=A.MutationObserver||A.WebKitMutationObserver,d;if(S){var a=0,s=new S(E),v=A.document.createTextNode("");s.observe(v,{characterData:!0}),d=f(function(){v.data=a=++a%2},"scheduleDrain")}else if(!A.setImmediate&&typeof A.MessageChannel<"u"){var i=new A.MessageChannel;i.port1.onmessage=E,d=f(function(){i.port2.postMessage(0)},"scheduleDrain")}else"document"in A&&"onreadystatechange"in A.document.createElement("script")?d=f(function(){var L=A.document.createElement("script");L.onreadystatechange=function(){E(),L.onreadystatechange=null,L.parentNode.removeChild(L),L=null},A.document.documentElement.appendChild(L)},"scheduleDrain"):d=f(function(){setTimeout(E,0)},"scheduleDrain");var c,g=[];function E(){c=!0;for(var L,j,P=g.length;P;){for(j=g,g=[],L=-1;++L<P;)j[L]();P=g.length}c=!1}f(E,"nextTick"),y.exports=$;function $(L){g.push(L)===1&&!c&&d()}f($,"immediate")}).call(this,typeof V<"u"?V:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(_,y,I){var A=_(1);function S(){}f(S,"INTERNAL");var d={},a=["REJECTED"],s=["FULFILLED"],v=["PENDING"];y.exports=i;function i(h){if(typeof h!="function")throw new TypeError("resolver must be a function");this.state=v,this.queue=[],this.outcome=void 0,h!==S&&$(this,h)}f(i,"Promise"),i.prototype.catch=function(h){return this.then(null,h)},i.prototype.then=function(h,T){if(typeof h!="function"&&this.state===s||typeof T!="function"&&this.state===a)return this;var D=new this.constructor(S);if(this.state!==v){var C=this.state===s?h:T;g(D,C,this.outcome)}else this.queue.push(new c(D,h,T));return D};function c(h,T,D){this.promise=h,typeof T=="function"&&(this.onFulfilled=T,this.callFulfilled=this.otherCallFulfilled),typeof D=="function"&&(this.onRejected=D,this.callRejected=this.otherCallRejected)}f(c,"QueueItem"),c.prototype.callFulfilled=function(h){d.resolve(this.promise,h)},c.prototype.otherCallFulfilled=function(h){g(this.promise,this.onFulfilled,h)},c.prototype.callRejected=function(h){d.reject(this.promise,h)},c.prototype.otherCallRejected=function(h){g(this.promise,this.onRejected,h)};function g(h,T,D){A(function(){var C;try{C=T(D)}catch(M){return d.reject(h,M)}C===h?d.reject(h,new TypeError("Cannot resolve promise with itself")):d.resolve(h,C)})}f(g,"unwrap"),d.resolve=function(h,T){var D=L(E,T);if(D.status==="error")return d.reject(h,D.value);var C=D.value;if(C)$(h,C);else{h.state=s,h.outcome=T;for(var M=-1,z=h.queue.length;++M<z;)h.queue[M].callFulfilled(T)}return h},d.reject=function(h,T){h.state=a,h.outcome=T;for(var D=-1,C=h.queue.length;++D<C;)h.queue[D].callRejected(T);return h};function E(h){var T=h&&h.then;if(h&&(typeof h=="object"||typeof h=="function")&&typeof T=="function")return f(function(){T.apply(h,arguments)},"appyThen")}f(E,"getThen");function $(h,T){var D=!1;function C(W){D||(D=!0,d.reject(h,W))}f(C,"onError");function M(W){D||(D=!0,d.resolve(h,W))}f(M,"onSuccess");function z(){T(M,C)}f(z,"tryToUnwrap");var Y=L(z);Y.status==="error"&&C(Y.value)}f($,"safelyResolveThenable");function L(h,T){var D={};try{D.value=h(T),D.status="success"}catch(C){D.status="error",D.value=C}return D}f(L,"tryCatch"),i.resolve=j;function j(h){return h instanceof this?h:d.resolve(new this(S),h)}f(j,"resolve"),i.reject=P;function P(h){var T=new this(S);return d.reject(T,h)}f(P,"reject"),i.all=q;function q(h){var T=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=h.length,C=!1;if(!D)return this.resolve([]);for(var M=new Array(D),z=0,Y=-1,W=new this(S);++Y<D;)k(h[Y],Y);return W;function k(K,H){T.resolve(K).then(Z,function(ie){C||(C=!0,d.reject(W,ie))});function Z(ie){M[H]=ie,++z===D&&!C&&(C=!0,d.resolve(W,M))}f(Z,"resolveFromAll")}}f(q,"all"),i.race=O;function O(h){var T=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var D=h.length,C=!1;if(!D)return this.resolve([]);for(var M=-1,z=new this(S);++M<D;)Y(h[M]);return z;function Y(W){T.resolve(W).then(function(k){C||(C=!0,d.resolve(z,k))},function(k){C||(C=!0,d.reject(z,k))})}}f(O,"race")},{1:1}],3:[function(_,y,I){(function(A){typeof A.Promise!="function"&&(A.Promise=_(2))}).call(this,typeof V<"u"?V:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(_,y,I){var A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function S(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}f(S,"_classCallCheck");function d(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}f(d,"getIDB");var a=d();function s(){try{if(!a||!a.open)return!1;var e=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),n=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!e||n)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}f(s,"isIndexedDBValid");function v(e,n){e=e||[],n=n||{};try{return new Blob(e,n)}catch(t){if(t.name!=="TypeError")throw t;for(var r=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,o=new r,u=0;u<e.length;u+=1)o.append(e[u]);return o.getBlob(n.type)}}f(v,"createBlob"),typeof Promise>"u"&&_(3);var i=Promise;function c(e,n){n&&e.then(function(r){n(null,r)},function(r){n(r)})}f(c,"executeCallback");function g(e,n,r){typeof n=="function"&&e.then(n),typeof r=="function"&&e.catch(r)}f(g,"executeTwoCallbacks");function E(e){return typeof e!="string"&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}f(E,"normalizeKey");function $(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}f($,"getCallback");var L="local-forage-detect-blob-support",j=void 0,P={},q=Object.prototype.toString,O="readonly",h="readwrite";function T(e){for(var n=e.length,r=new ArrayBuffer(n),o=new Uint8Array(r),u=0;u<n;u++)o[u]=e.charCodeAt(u);return r}f(T,"_binStringToArrayBuffer");function D(e){return new i(function(n){var r=e.transaction(L,h),o=v([""]);r.objectStore(L).put(o,"key"),r.onabort=function(u){u.preventDefault(),u.stopPropagation(),n(!1)},r.oncomplete=function(){var u=navigator.userAgent.match(/Chrome\/(\d+)/),t=navigator.userAgent.match(/Edge\//);n(t||!u||parseInt(u[1],10)>=43)}}).catch(function(){return!1})}f(D,"_checkBlobSupportWithoutCaching");function C(e){return typeof j=="boolean"?i.resolve(j):D(e).then(function(n){return j=n,j})}f(C,"_checkBlobSupport");function M(e){var n=P[e.name],r={};r.promise=new i(function(o,u){r.resolve=o,r.reject=u}),n.deferredOperations.push(r),n.dbReady?n.dbReady=n.dbReady.then(function(){return r.promise}):n.dbReady=r.promise}f(M,"_deferReadiness");function z(e){var n=P[e.name],r=n.deferredOperations.pop();if(r)return r.resolve(),r.promise}f(z,"_advanceReadiness");function Y(e,n){var r=P[e.name],o=r.deferredOperations.pop();if(o)return o.reject(n),o.promise}f(Y,"_rejectReadiness");function W(e,n){return new i(function(r,o){if(P[e.name]=P[e.name]||je(),e.db)if(n)M(e),e.db.close();else return r(e.db);var u=[e.name];n&&u.push(e.version);var t=a.open.apply(a,u);n&&(t.onupgradeneeded=function(l){var p=t.result;try{p.createObjectStore(e.storeName),l.oldVersion<=1&&p.createObjectStore(L)}catch(b){if(b.name==="ConstraintError")console.warn('The database "'+e.name+'" has been upgraded from version '+l.oldVersion+" to version "+l.newVersion+', but the storage "'+e.storeName+'" already exists.');else throw b}}),t.onerror=function(l){l.preventDefault(),o(t.error)},t.onsuccess=function(){var l=t.result;l.onversionchange=function(p){p.target.close()},r(l),z(e)}})}f(W,"_getConnection");function k(e){return W(e,!1)}f(k,"_getOriginalConnection");function K(e){return W(e,!0)}f(K,"_getUpgradedConnection");function H(e,n){if(!e.db)return!0;var r=!e.db.objectStoreNames.contains(e.storeName),o=e.version<e.db.version,u=e.version>e.db.version;if(o&&(e.version!==n&&console.warn('The database "'+e.name+`" can't be downgraded from version `+e.db.version+" to version "+e.version+"."),e.version=e.db.version),u||r){if(r){var t=e.db.version+1;t>e.version&&(e.version=t)}return!0}return!1}f(H,"_isUpgradeNeeded");function Z(e){return new i(function(n,r){var o=new FileReader;o.onerror=r,o.onloadend=function(u){var t=btoa(u.target.result||"");n({__local_forage_encoded_blob:!0,data:t,type:e.type})},o.readAsBinaryString(e)})}f(Z,"_encodeBlob");function ie(e){var n=T(atob(e.data));return v([n],{type:e.type})}f(ie,"_decodeBlob");function Ye(e){return e&&e.__local_forage_encoded_blob}f(Ye,"_isEncodedBlob");function Ir(e){var n=this,r=n._initReady().then(function(){var o=P[n._dbInfo.name];if(o&&o.dbReady)return o.dbReady});return g(r,e,e),r}f(Ir,"_fullyReady");function Rr(e){M(e);for(var n=P[e.name],r=n.forages,o=0;o<r.length;o++){var u=r[o];u._dbInfo.db&&(u._dbInfo.db.close(),u._dbInfo.db=null)}return e.db=null,k(e).then(function(t){return e.db=t,H(e)?K(e):t}).then(function(t){e.db=n.db=t;for(var l=0;l<r.length;l++)r[l]._dbInfo.db=t}).catch(function(t){throw Y(e,t),t})}f(Rr,"_tryReconnect");function ee(e,n,r,o){o===void 0&&(o=1);try{var u=e.db.transaction(e.storeName,n);r(null,u)}catch(t){if(o>0&&(!e.db||t.name==="InvalidStateError"||t.name==="NotFoundError"))return i.resolve().then(function(){if(!e.db||t.name==="NotFoundError"&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),K(e)}).then(function(){return Rr(e).then(function(){ee(e,n,r,o-1)})}).catch(r);r(t)}}f(ee,"createTransaction");function je(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}f(je,"createDbContext");function Ar(e){var n=this,r={db:null};if(e)for(var o in e)r[o]=e[o];var u=P[r.name];u||(u=je(),P[r.name]=u),u.forages.push(n),n._initReady||(n._initReady=n.ready,n.ready=Ir);var t=[];function l(){return i.resolve()}f(l,"ignoreErrors");for(var p=0;p<u.forages.length;p++){var b=u.forages[p];b!==n&&t.push(b._initReady().catch(l))}var w=u.forages.slice(0);return i.all(t).then(function(){return r.db=u.db,k(r)}).then(function(x){return r.db=x,H(r,n._defaultConfig.version)?K(r):x}).then(function(x){r.db=u.db=x,n._dbInfo=r;for(var N=0;N<w.length;N++){var B=w[N];B!==n&&(B._dbInfo.db=r.db,B._dbInfo.version=r.version)}})}f(Ar,"_initStorage");function Nr(e,n){var r=this;e=E(e);var o=new i(function(u,t){r.ready().then(function(){ee(r._dbInfo,O,function(l,p){if(l)return t(l);try{var b=p.objectStore(r._dbInfo.storeName),w=b.get(e);w.onsuccess=function(){var x=w.result;x===void 0&&(x=null),Ye(x)&&(x=ie(x)),u(x)},w.onerror=function(){t(w.error)}}catch(x){t(x)}})}).catch(t)});return c(o,n),o}f(Nr,"getItem");function Dr(e,n){var r=this,o=new i(function(u,t){r.ready().then(function(){ee(r._dbInfo,O,function(l,p){if(l)return t(l);try{var b=p.objectStore(r._dbInfo.storeName),w=b.openCursor(),x=1;w.onsuccess=function(){var N=w.result;if(N){var B=N.value;Ye(B)&&(B=ie(B));var F=e(B,N.key,x++);F!==void 0?u(F):N.continue()}else u()},w.onerror=function(){t(w.error)}}catch(N){t(N)}})}).catch(t)});return c(o,n),o}f(Dr,"iterate");function Tr(e,n,r){var o=this;e=E(e);var u=new i(function(t,l){var p;o.ready().then(function(){return p=o._dbInfo,q.call(n)==="[object Blob]"?C(p.db).then(function(b){return b?n:Z(n)}):n}).then(function(b){ee(o._dbInfo,h,function(w,x){if(w)return l(w);try{var N=x.objectStore(o._dbInfo.storeName);b===null&&(b=void 0);var B=N.put(b,e);x.oncomplete=function(){b===void 0&&(b=null),t(b)},x.onabort=x.onerror=function(){var F=B.error?B.error:B.transaction.error;l(F)}}catch(F){l(F)}})}).catch(l)});return c(u,r),u}f(Tr,"setItem");function Cr(e,n){var r=this;e=E(e);var o=new i(function(u,t){r.ready().then(function(){ee(r._dbInfo,h,function(l,p){if(l)return t(l);try{var b=p.objectStore(r._dbInfo.storeName),w=b.delete(e);p.oncomplete=function(){u()},p.onerror=function(){t(w.error)},p.onabort=function(){var x=w.error?w.error:w.transaction.error;t(x)}}catch(x){t(x)}})}).catch(t)});return c(o,n),o}f(Cr,"removeItem");function Or(e){var n=this,r=new i(function(o,u){n.ready().then(function(){ee(n._dbInfo,h,function(t,l){if(t)return u(t);try{var p=l.objectStore(n._dbInfo.storeName),b=p.clear();l.oncomplete=function(){o()},l.onabort=l.onerror=function(){var w=b.error?b.error:b.transaction.error;u(w)}}catch(w){u(w)}})}).catch(u)});return c(r,e),r}f(Or,"clear");function Br(e){var n=this,r=new i(function(o,u){n.ready().then(function(){ee(n._dbInfo,O,function(t,l){if(t)return u(t);try{var p=l.objectStore(n._dbInfo.storeName),b=p.count();b.onsuccess=function(){o(b.result)},b.onerror=function(){u(b.error)}}catch(w){u(w)}})}).catch(u)});return c(r,e),r}f(Br,"length");function Pr(e,n){var r=this,o=new i(function(u,t){if(e<0){u(null);return}r.ready().then(function(){ee(r._dbInfo,O,function(l,p){if(l)return t(l);try{var b=p.objectStore(r._dbInfo.storeName),w=!1,x=b.openKeyCursor();x.onsuccess=function(){var N=x.result;if(!N){u(null);return}e===0||w?u(N.key):(w=!0,N.advance(e))},x.onerror=function(){t(x.error)}}catch(N){t(N)}})}).catch(t)});return c(o,n),o}f(Pr,"key");function Lr(e){var n=this,r=new i(function(o,u){n.ready().then(function(){ee(n._dbInfo,O,function(t,l){if(t)return u(t);try{var p=l.objectStore(n._dbInfo.storeName),b=p.openKeyCursor(),w=[];b.onsuccess=function(){var x=b.result;if(!x){o(w);return}w.push(x.key),x.continue()},b.onerror=function(){u(b.error)}}catch(x){u(x)}})}).catch(u)});return c(r,e),r}f(Lr,"keys");function Mr(e,n){n=$.apply(this,arguments);var r=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var o=this,u;if(!e.name)u=i.reject("Invalid arguments");else{var t=e.name===r.name&&o._dbInfo.db,l=t?i.resolve(o._dbInfo.db):k(e).then(function(p){var b=P[e.name],w=b.forages;b.db=p;for(var x=0;x<w.length;x++)w[x]._dbInfo.db=p;return p});e.storeName?u=l.then(function(p){if(!!p.objectStoreNames.contains(e.storeName)){var b=p.version+1;M(e);var w=P[e.name],x=w.forages;p.close();for(var N=0;N<x.length;N++){var B=x[N];B._dbInfo.db=null,B._dbInfo.version=b}var F=new i(function(U,G){var X=a.open(e.name,b);X.onerror=function(Q){var ue=X.result;ue.close(),G(Q)},X.onupgradeneeded=function(){var Q=X.result;Q.deleteObjectStore(e.storeName)},X.onsuccess=function(){var Q=X.result;Q.close(),U(Q)}});return F.then(function(U){w.db=U;for(var G=0;G<x.length;G++){var X=x[G];X._dbInfo.db=U,z(X._dbInfo)}}).catch(function(U){throw(Y(e,U)||i.resolve()).catch(function(){}),U})}}):u=l.then(function(p){M(e);var b=P[e.name],w=b.forages;p.close();for(var x=0;x<w.length;x++){var N=w[x];N._dbInfo.db=null}var B=new i(function(F,U){var G=a.deleteDatabase(e.name);G.onerror=function(){var X=G.result;X&&X.close(),U(G.error)},G.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},G.onsuccess=function(){var X=G.result;X&&X.close(),F(X)}});return B.then(function(F){b.db=F;for(var U=0;U<w.length;U++){var G=w[U];z(G._dbInfo)}}).catch(function(F){throw(Y(e,F)||i.resolve()).catch(function(){}),F})})}return c(u,n),u}f(Mr,"dropInstance");var Fr={_driver:"asyncStorage",_initStorage:Ar,_support:s(),iterate:Dr,getItem:Nr,setItem:Tr,removeItem:Cr,clear:Or,length:Br,key:Pr,keys:Lr,dropInstance:Mr};function $r(){return typeof openDatabase=="function"}f($r,"isWebSQLValid");var re="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ur="~~local_forage_type~",We=/^~~local_forage_type~([^~]+)~/,de="__lfsc__:",me=de.length,be="arbf",we="blob",Xe="si08",ke="ui08",Ge="uic8",Ke="si16",Ve="si32",Je="ur16",qe="ui32",Qe="fl32",He="fl64",Ze=me+be.length,er=Object.prototype.toString;function rr(e){var n=e.length*.75,r=e.length,o,u=0,t,l,p,b;e[e.length-1]==="="&&(n--,e[e.length-2]==="="&&n--);var w=new ArrayBuffer(n),x=new Uint8Array(w);for(o=0;o<r;o+=4)t=re.indexOf(e[o]),l=re.indexOf(e[o+1]),p=re.indexOf(e[o+2]),b=re.indexOf(e[o+3]),x[u++]=t<<2|l>>4,x[u++]=(l&15)<<4|p>>2,x[u++]=(p&3)<<6|b&63;return w}f(rr,"stringToBuffer");function _e(e){var n=new Uint8Array(e),r="",o;for(o=0;o<n.length;o+=3)r+=re[n[o]>>2],r+=re[(n[o]&3)<<4|n[o+1]>>4],r+=re[(n[o+1]&15)<<2|n[o+2]>>6],r+=re[n[o+2]&63];return n.length%3===2?r=r.substring(0,r.length-1)+"=":n.length%3===1&&(r=r.substring(0,r.length-2)+"=="),r}f(_e,"bufferToString");function zr(e,n){var r="";if(e&&(r=er.call(e)),e&&(r==="[object ArrayBuffer]"||e.buffer&&er.call(e.buffer)==="[object ArrayBuffer]")){var o,u=de;e instanceof ArrayBuffer?(o=e,u+=be):(o=e.buffer,r==="[object Int8Array]"?u+=Xe:r==="[object Uint8Array]"?u+=ke:r==="[object Uint8ClampedArray]"?u+=Ge:r==="[object Int16Array]"?u+=Ke:r==="[object Uint16Array]"?u+=Je:r==="[object Int32Array]"?u+=Ve:r==="[object Uint32Array]"?u+=qe:r==="[object Float32Array]"?u+=Qe:r==="[object Float64Array]"?u+=He:n(new Error("Failed to get type for BinaryArray"))),n(u+_e(o))}else if(r==="[object Blob]"){var t=new FileReader;t.onload=function(){var l=Ur+e.type+"~"+_e(this.result);n(de+we+l)},t.readAsArrayBuffer(e)}else try{n(JSON.stringify(e))}catch(l){console.error("Couldn't convert value into a JSON string: ",e),n(null,l)}}f(zr,"serialize");function Yr(e){if(e.substring(0,me)!==de)return JSON.parse(e);var n=e.substring(Ze),r=e.substring(me,Ze),o;if(r===we&&We.test(n)){var u=n.match(We);o=u[1],n=n.substring(u[0].length)}var t=rr(n);switch(r){case be:return t;case we:return v([t],{type:o});case Xe:return new Int8Array(t);case ke:return new Uint8Array(t);case Ge:return new Uint8ClampedArray(t);case Ke:return new Int16Array(t);case Je:return new Uint16Array(t);case Ve:return new Int32Array(t);case qe:return new Uint32Array(t);case Qe:return new Float32Array(t);case He:return new Float64Array(t);default:throw new Error("Unkown type: "+r)}}f(Yr,"deserialize");var xe={serialize:zr,deserialize:Yr,stringToBuffer:rr,bufferToString:_e};function nr(e,n,r,o){e.executeSql("CREATE TABLE IF NOT EXISTS "+n.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],r,o)}f(nr,"createDbTable");function jr(e){var n=this,r={db:null};if(e)for(var o in e)r[o]=typeof e[o]!="string"?e[o].toString():e[o];var u=new i(function(t,l){try{r.db=openDatabase(r.name,String(r.version),r.description,r.size)}catch(p){return l(p)}r.db.transaction(function(p){nr(p,r,function(){n._dbInfo=r,t()},function(b,w){l(w)})},l)});return r.serializer=xe,u}f(jr,"_initStorage$1");function ne(e,n,r,o,u,t){e.executeSql(r,o,u,function(l,p){p.code===p.SYNTAX_ERR?l.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[n.storeName],function(b,w){w.rows.length?t(b,p):nr(b,n,function(){b.executeSql(r,o,u,t)},t)},t):t(l,p)},t)}f(ne,"tryExecuteSql");function Wr(e,n){var r=this;e=E(e);var o=new i(function(u,t){r.ready().then(function(){var l=r._dbInfo;l.db.transaction(function(p){ne(p,l,"SELECT * FROM "+l.storeName+" WHERE key = ? LIMIT 1",[e],function(b,w){var x=w.rows.length?w.rows.item(0).value:null;x&&(x=l.serializer.deserialize(x)),u(x)},function(b,w){t(w)})})}).catch(t)});return c(o,n),o}f(Wr,"getItem$1");function Xr(e,n){var r=this,o=new i(function(u,t){r.ready().then(function(){var l=r._dbInfo;l.db.transaction(function(p){ne(p,l,"SELECT * FROM "+l.storeName,[],function(b,w){for(var x=w.rows,N=x.length,B=0;B<N;B++){var F=x.item(B),U=F.value;if(U&&(U=l.serializer.deserialize(U)),U=e(U,F.key,B+1),U!==void 0){u(U);return}}u()},function(b,w){t(w)})})}).catch(t)});return c(o,n),o}f(Xr,"iterate$1");function tr(e,n,r,o){var u=this;e=E(e);var t=new i(function(l,p){u.ready().then(function(){n===void 0&&(n=null);var b=n,w=u._dbInfo;w.serializer.serialize(n,function(x,N){N?p(N):w.db.transaction(function(B){ne(B,w,"INSERT OR REPLACE INTO "+w.storeName+" (key, value) VALUES (?, ?)",[e,x],function(){l(b)},function(F,U){p(U)})},function(B){if(B.code===B.QUOTA_ERR){if(o>0){l(tr.apply(u,[e,b,r,o-1]));return}p(B)}})})}).catch(p)});return c(t,r),t}f(tr,"_setItem");function kr(e,n,r){return tr.apply(this,[e,n,r,1])}f(kr,"setItem$1");function Gr(e,n){var r=this;e=E(e);var o=new i(function(u,t){r.ready().then(function(){var l=r._dbInfo;l.db.transaction(function(p){ne(p,l,"DELETE FROM "+l.storeName+" WHERE key = ?",[e],function(){u()},function(b,w){t(w)})})}).catch(t)});return c(o,n),o}f(Gr,"removeItem$1");function Kr(e){var n=this,r=new i(function(o,u){n.ready().then(function(){var t=n._dbInfo;t.db.transaction(function(l){ne(l,t,"DELETE FROM "+t.storeName,[],function(){o()},function(p,b){u(b)})})}).catch(u)});return c(r,e),r}f(Kr,"clear$1");function Vr(e){var n=this,r=new i(function(o,u){n.ready().then(function(){var t=n._dbInfo;t.db.transaction(function(l){ne(l,t,"SELECT COUNT(key) as c FROM "+t.storeName,[],function(p,b){var w=b.rows.item(0).c;o(w)},function(p,b){u(b)})})}).catch(u)});return c(r,e),r}f(Vr,"length$1");function Jr(e,n){var r=this,o=new i(function(u,t){r.ready().then(function(){var l=r._dbInfo;l.db.transaction(function(p){ne(p,l,"SELECT key FROM "+l.storeName+" WHERE id = ? LIMIT 1",[e+1],function(b,w){var x=w.rows.length?w.rows.item(0).key:null;u(x)},function(b,w){t(w)})})}).catch(t)});return c(o,n),o}f(Jr,"key$1");function qr(e){var n=this,r=new i(function(o,u){n.ready().then(function(){var t=n._dbInfo;t.db.transaction(function(l){ne(l,t,"SELECT key FROM "+t.storeName,[],function(p,b){for(var w=[],x=0;x<b.rows.length;x++)w.push(b.rows.item(x).key);o(w)},function(p,b){u(b)})})}).catch(u)});return c(r,e),r}f(qr,"keys$1");function Qr(e){return new i(function(n,r){e.transaction(function(o){o.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(u,t){for(var l=[],p=0;p<t.rows.length;p++)l.push(t.rows.item(p).name);n({db:e,storeNames:l})},function(u,t){r(t)})},function(o){r(o)})})}f(Qr,"getAllStoreNames");function Hr(e,n){n=$.apply(this,arguments);var r=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var o=this,u;return e.name?u=new i(function(t){var l;e.name===r.name?l=o._dbInfo.db:l=openDatabase(e.name,"","",0),e.storeName?t({db:l,storeNames:[e.storeName]}):t(Qr(l))}).then(function(t){return new i(function(l,p){t.db.transaction(function(b){function w(F){return new i(function(U,G){b.executeSql("DROP TABLE IF EXISTS "+F,[],function(){U()},function(X,Q){G(Q)})})}f(w,"dropTable");for(var x=[],N=0,B=t.storeNames.length;N<B;N++)x.push(w(t.storeNames[N]));i.all(x).then(function(){l()}).catch(function(F){p(F)})},function(b){p(b)})})}):u=i.reject("Invalid arguments"),c(u,n),u}f(Hr,"dropInstance$1");var Zr={_driver:"webSQLStorage",_initStorage:jr,_support:$r(),iterate:Xr,getItem:Wr,setItem:kr,removeItem:Gr,clear:Kr,length:Vr,key:Jr,keys:qr,dropInstance:Hr};function en(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}f(en,"isLocalStorageValid");function or(e,n){var r=e.name+"/";return e.storeName!==n.storeName&&(r+=e.storeName+"/"),r}f(or,"_getKeyPrefix");function rn(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch{return!0}}f(rn,"checkIfLocalStorageThrows");function nn(){return!rn()||localStorage.length>0}f(nn,"_isLocalStorageUsable");function tn(e){var n=this,r={};if(e)for(var o in e)r[o]=e[o];return r.keyPrefix=or(e,n._defaultConfig),nn()?(n._dbInfo=r,r.serializer=xe,i.resolve()):i.reject()}f(tn,"_initStorage$2");function on(e){var n=this,r=n.ready().then(function(){for(var o=n._dbInfo.keyPrefix,u=localStorage.length-1;u>=0;u--){var t=localStorage.key(u);t.indexOf(o)===0&&localStorage.removeItem(t)}});return c(r,e),r}f(on,"clear$2");function an(e,n){var r=this;e=E(e);var o=r.ready().then(function(){var u=r._dbInfo,t=localStorage.getItem(u.keyPrefix+e);return t&&(t=u.serializer.deserialize(t)),t});return c(o,n),o}f(an,"getItem$2");function fn(e,n){var r=this,o=r.ready().then(function(){for(var u=r._dbInfo,t=u.keyPrefix,l=t.length,p=localStorage.length,b=1,w=0;w<p;w++){var x=localStorage.key(w);if(x.indexOf(t)===0){var N=localStorage.getItem(x);if(N&&(N=u.serializer.deserialize(N)),N=e(N,x.substring(l),b++),N!==void 0)return N}}});return c(o,n),o}f(fn,"iterate$2");function un(e,n){var r=this,o=r.ready().then(function(){var u=r._dbInfo,t;try{t=localStorage.key(e)}catch{t=null}return t&&(t=t.substring(u.keyPrefix.length)),t});return c(o,n),o}f(un,"key$2");function cn(e){var n=this,r=n.ready().then(function(){for(var o=n._dbInfo,u=localStorage.length,t=[],l=0;l<u;l++){var p=localStorage.key(l);p.indexOf(o.keyPrefix)===0&&t.push(p.substring(o.keyPrefix.length))}return t});return c(r,e),r}f(cn,"keys$2");function sn(e){var n=this,r=n.keys().then(function(o){return o.length});return c(r,e),r}f(sn,"length$2");function ln(e,n){var r=this;e=E(e);var o=r.ready().then(function(){var u=r._dbInfo;localStorage.removeItem(u.keyPrefix+e)});return c(o,n),o}f(ln,"removeItem$2");function dn(e,n,r){var o=this;e=E(e);var u=o.ready().then(function(){n===void 0&&(n=null);var t=n;return new i(function(l,p){var b=o._dbInfo;b.serializer.serialize(n,function(w,x){if(x)p(x);else try{localStorage.setItem(b.keyPrefix+e,w),l(t)}catch(N){(N.name==="QuotaExceededError"||N.name==="NS_ERROR_DOM_QUOTA_REACHED")&&p(N),p(N)}})})});return c(u,r),u}f(dn,"setItem$2");function vn(e,n){if(n=$.apply(this,arguments),e=typeof e!="function"&&e||{},!e.name){var r=this.config();e.name=e.name||r.name,e.storeName=e.storeName||r.storeName}var o=this,u;return e.name?u=new i(function(t){e.storeName?t(or(e,o._defaultConfig)):t(e.name+"/")}).then(function(t){for(var l=localStorage.length-1;l>=0;l--){var p=localStorage.key(l);p.indexOf(t)===0&&localStorage.removeItem(p)}}):u=i.reject("Invalid arguments"),c(u,n),u}f(vn,"dropInstance$2");var hn={_driver:"localStorageWrapper",_initStorage:tn,_support:en(),iterate:fn,getItem:an,setItem:dn,removeItem:ln,clear:on,length:sn,key:un,keys:cn,dropInstance:vn},yn=f(function(n,r){return n===r||typeof n=="number"&&typeof r=="number"&&isNaN(n)&&isNaN(r)},"sameValue"),pn=f(function(n,r){for(var o=n.length,u=0;u<o;){if(yn(n[u],r))return!0;u++}return!1},"includes"),ir=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},fe={},ar={},ae={INDEXEDDB:Fr,WEBSQL:Zr,LOCALSTORAGE:hn},gn=[ae.INDEXEDDB._driver,ae.WEBSQL._driver,ae.LOCALSTORAGE._driver],ve=["dropInstance"],Se=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ve),mn={description:"",driver:gn.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function bn(e,n){e[n]=function(){var r=arguments;return e.ready().then(function(){return e[n].apply(e,r)})}}f(bn,"callWhenReady");function Ee(){for(var e=1;e<arguments.length;e++){var n=arguments[e];if(n)for(var r in n)n.hasOwnProperty(r)&&(ir(n[r])?arguments[0][r]=n[r].slice():arguments[0][r]=n[r])}return arguments[0]}f(Ee,"extend");var wn=function(){function e(n){S(this,e);for(var r in ae)if(ae.hasOwnProperty(r)){var o=ae[r],u=o._driver;this[r]=u,fe[u]||this.defineDriver(o)}this._defaultConfig=Ee({},mn),this._config=Ee({},this._defaultConfig,n),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return f(e,"LocalForage"),e.prototype.config=f(function(r){if((typeof r>"u"?"undefined":A(r))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var o in r){if(o==="storeName"&&(r[o]=r[o].replace(/\W/g,"_")),o==="version"&&typeof r[o]!="number")return new Error("Database version must be a number.");this._config[o]=r[o]}return"driver"in r&&r.driver?this.setDriver(this._config.driver):!0}else return typeof r=="string"?this._config[r]:this._config},"config"),e.prototype.defineDriver=f(function(r,o,u){var t=new i(function(l,p){try{var b=r._driver,w=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!r._driver){p(w);return}for(var x=Se.concat("_initStorage"),N=0,B=x.length;N<B;N++){var F=x[N],U=!pn(ve,F);if((U||r[F])&&typeof r[F]!="function"){p(w);return}}var G=f(function(){for(var ue=f(function(Sn){return function(){var En=new Error("Method "+Sn+" is not implemented by the current driver"),fr=i.reject(En);return c(fr,arguments[arguments.length-1]),fr}},"methodNotImplementedFactory"),Ie=0,xn=ve.length;Ie<xn;Ie++){var Re=ve[Ie];r[Re]||(r[Re]=ue(Re))}},"configureMissingMethods");G();var X=f(function(ue){fe[b]&&console.info("Redefining LocalForage driver: "+b),fe[b]=r,ar[b]=ue,l()},"setDriverSupport");"_support"in r?r._support&&typeof r._support=="function"?r._support().then(X,p):X(!!r._support):X(!0)}catch(Q){p(Q)}});return g(t,o,u),t},"defineDriver"),e.prototype.driver=f(function(){return this._driver||null},"driver"),e.prototype.getDriver=f(function(r,o,u){var t=fe[r]?i.resolve(fe[r]):i.reject(new Error("Driver not found."));return g(t,o,u),t},"getDriver"),e.prototype.getSerializer=f(function(r){var o=i.resolve(xe);return g(o,r),o},"getSerializer"),e.prototype.ready=f(function(r){var o=this,u=o._driverSet.then(function(){return o._ready===null&&(o._ready=o._initDriver()),o._ready});return g(u,r,r),u},"ready"),e.prototype.setDriver=f(function(r,o,u){var t=this;ir(r)||(r=[r]);var l=this._getSupportedDrivers(r);function p(){t._config.driver=t.driver()}f(p,"setDriverToConfig");function b(N){return t._extend(N),p(),t._ready=t._initStorage(t._config),t._ready}f(b,"extendSelfWithDriver");function w(N){return function(){var B=0;function F(){for(;B<N.length;){var U=N[B];return B++,t._dbInfo=null,t._ready=null,t.getDriver(U).then(b).catch(F)}p();var G=new Error("No available storage method found.");return t._driverSet=i.reject(G),t._driverSet}return f(F,"driverPromiseLoop"),F()}}f(w,"initDriver");var x=this._driverSet!==null?this._driverSet.catch(function(){return i.resolve()}):i.resolve();return this._driverSet=x.then(function(){var N=l[0];return t._dbInfo=null,t._ready=null,t.getDriver(N).then(function(B){t._driver=B._driver,p(),t._wrapLibraryMethodsWithReady(),t._initDriver=w(l)})}).catch(function(){p();var N=new Error("No available storage method found.");return t._driverSet=i.reject(N),t._driverSet}),g(this._driverSet,o,u),this._driverSet},"setDriver"),e.prototype.supports=f(function(r){return!!ar[r]},"supports"),e.prototype._extend=f(function(r){Ee(this,r)},"_extend"),e.prototype._getSupportedDrivers=f(function(r){for(var o=[],u=0,t=r.length;u<t;u++){var l=r[u];this.supports(l)&&o.push(l)}return o},"_getSupportedDrivers"),e.prototype._wrapLibraryMethodsWithReady=f(function(){for(var r=0,o=Se.length;r<o;r++)bn(this,Se[r])},"_wrapLibraryMethodsWithReady"),e.prototype.createInstance=f(function(r){return new e(r)},"createInstance"),e}(),_n=new wn;y.exports=_n},{3:3}]},{},[4])(4)})})(ye);const J=f(({q:m,r:R,s:_})=>`${m} ${R} ${_}`,"asCoordinateKey"),Ae=[0,60,120,180,240,300];var Ne={exports:{}};(function(m){(function(R,_,y){function I(a){var s=this,v=d();s.next=function(){var i=2091639*s.s0+s.c*23283064365386963e-26;return s.s0=s.s1,s.s1=s.s2,s.s2=i-(s.c=i|0)},s.c=1,s.s0=v(" "),s.s1=v(" "),s.s2=v(" "),s.s0-=v(a),s.s0<0&&(s.s0+=1),s.s1-=v(a),s.s1<0&&(s.s1+=1),s.s2-=v(a),s.s2<0&&(s.s2+=1),v=null}f(I,"Alea");function A(a,s){return s.c=a.c,s.s0=a.s0,s.s1=a.s1,s.s2=a.s2,s}f(A,"copy");function S(a,s){var v=new I(a),i=s&&s.state,c=v.next;return c.int32=function(){return v.next()*4294967296|0},c.double=function(){return c()+(c()*2097152|0)*11102230246251565e-32},c.quick=c,i&&(typeof i=="object"&&A(i,v),c.state=function(){return A(v,{})}),c}f(S,"impl");function d(){var a=4022871197,s=f(function(v){v=String(v);for(var i=0;i<v.length;i++){a+=v.charCodeAt(i);var c=.02519603282416938*a;a=c>>>0,c-=a,c*=a,a=c>>>0,c-=a,a+=c*4294967296}return(a>>>0)*23283064365386963e-26},"mash");return s}f(d,"Mash"),_&&_.exports?_.exports=S:y&&y.amd?y(function(){return S}):this.alea=S})(V,m,!1)})(Ne);var De={exports:{}};(function(m){(function(R,_,y){function I(d){var a=this,s="";a.x=0,a.y=0,a.z=0,a.w=0,a.next=function(){var i=a.x^a.x<<11;return a.x=a.y,a.y=a.z,a.z=a.w,a.w^=a.w>>>19^i^i>>>8},d===(d|0)?a.x=d:s+=d;for(var v=0;v<s.length+64;v++)a.x^=s.charCodeAt(v)|0,a.next()}f(I,"XorGen");function A(d,a){return a.x=d.x,a.y=d.y,a.z=d.z,a.w=d.w,a}f(A,"copy");function S(d,a){var s=new I(d),v=a&&a.state,i=f(function(){return(s.next()>>>0)/4294967296},"prng");return i.double=function(){do var c=s.next()>>>11,g=(s.next()>>>0)/4294967296,E=(c+g)/(1<<21);while(E===0);return E},i.int32=s.next,i.quick=i,v&&(typeof v=="object"&&A(v,s),i.state=function(){return A(s,{})}),i}f(S,"impl"),_&&_.exports?_.exports=S:y&&y.amd?y(function(){return S}):this.xor128=S})(V,m,!1)})(De);var Te={exports:{}};(function(m){(function(R,_,y){function I(d){var a=this,s="";a.next=function(){var i=a.x^a.x>>>2;return a.x=a.y,a.y=a.z,a.z=a.w,a.w=a.v,(a.d=a.d+362437|0)+(a.v=a.v^a.v<<4^(i^i<<1))|0},a.x=0,a.y=0,a.z=0,a.w=0,a.v=0,d===(d|0)?a.x=d:s+=d;for(var v=0;v<s.length+64;v++)a.x^=s.charCodeAt(v)|0,v==s.length&&(a.d=a.x<<10^a.x>>>4),a.next()}f(I,"XorGen");function A(d,a){return a.x=d.x,a.y=d.y,a.z=d.z,a.w=d.w,a.v=d.v,a.d=d.d,a}f(A,"copy");function S(d,a){var s=new I(d),v=a&&a.state,i=f(function(){return(s.next()>>>0)/4294967296},"prng");return i.double=function(){do var c=s.next()>>>11,g=(s.next()>>>0)/4294967296,E=(c+g)/(1<<21);while(E===0);return E},i.int32=s.next,i.quick=i,v&&(typeof v=="object"&&A(v,s),i.state=function(){return A(s,{})}),i}f(S,"impl"),_&&_.exports?_.exports=S:y&&y.amd?y(function(){return S}):this.xorwow=S})(V,m,!1)})(Te);var Ce={exports:{}};(function(m){(function(R,_,y){function I(d){var a=this;a.next=function(){var v=a.x,i=a.i,c,g;return c=v[i],c^=c>>>7,g=c^c<<24,c=v[i+1&7],g^=c^c>>>10,c=v[i+3&7],g^=c^c>>>3,c=v[i+4&7],g^=c^c<<7,c=v[i+7&7],c=c^c<<13,g^=c^c<<9,v[i]=g,a.i=i+1&7,g};function s(v,i){var c,g=[];if(i===(i|0))g[0]=i;else for(i=""+i,c=0;c<i.length;++c)g[c&7]=g[c&7]<<15^i.charCodeAt(c)+g[c+1&7]<<13;for(;g.length<8;)g.push(0);for(c=0;c<8&&g[c]===0;++c);for(c==8?g[7]=-1:g[c],v.x=g,v.i=0,c=256;c>0;--c)v.next()}f(s,"init"),s(a,d)}f(I,"XorGen");function A(d,a){return a.x=d.x.slice(),a.i=d.i,a}f(A,"copy");function S(d,a){d==null&&(d=+new Date);var s=new I(d),v=a&&a.state,i=f(function(){return(s.next()>>>0)/4294967296},"prng");return i.double=function(){do var c=s.next()>>>11,g=(s.next()>>>0)/4294967296,E=(c+g)/(1<<21);while(E===0);return E},i.int32=s.next,i.quick=i,v&&(v.x&&A(v,s),i.state=function(){return A(s,{})}),i}f(S,"impl"),_&&_.exports?_.exports=S:y&&y.amd?y(function(){return S}):this.xorshift7=S})(V,m,!1)})(Ce);var Oe={exports:{}};(function(m){(function(R,_,y){function I(d){var a=this;a.next=function(){var v=a.w,i=a.X,c=a.i,g,E;return a.w=v=v+1640531527|0,E=i[c+34&127],g=i[c=c+1&127],E^=E<<13,g^=g<<17,E^=E>>>15,g^=g>>>12,E=i[c]=E^g,a.i=c,E+(v^v>>>16)|0};function s(v,i){var c,g,E,$,L,j=[],P=128;for(i===(i|0)?(g=i,i=null):(i=i+"\0",g=0,P=Math.max(P,i.length)),E=0,$=-32;$<P;++$)i&&(g^=i.charCodeAt(($+32)%i.length)),$===0&&(L=g),g^=g<<10,g^=g>>>15,g^=g<<4,g^=g>>>13,$>=0&&(L=L+1640531527|0,c=j[$&127]^=g+L,E=c==0?E+1:0);for(E>=128&&(j[(i&&i.length||0)&127]=-1),E=127,$=4*128;$>0;--$)g=j[E+34&127],c=j[E=E+1&127],g^=g<<13,c^=c<<17,g^=g>>>15,c^=c>>>12,j[E]=g^c;v.w=L,v.X=j,v.i=E}f(s,"init"),s(a,d)}f(I,"XorGen");function A(d,a){return a.i=d.i,a.w=d.w,a.X=d.X.slice(),a}f(A,"copy");function S(d,a){d==null&&(d=+new Date);var s=new I(d),v=a&&a.state,i=f(function(){return(s.next()>>>0)/4294967296},"prng");return i.double=function(){do var c=s.next()>>>11,g=(s.next()>>>0)/4294967296,E=(c+g)/(1<<21);while(E===0);return E},i.int32=s.next,i.quick=i,v&&(v.X&&A(v,s),i.state=function(){return A(s,{})}),i}f(S,"impl"),_&&_.exports?_.exports=S:y&&y.amd?y(function(){return S}):this.xor4096=S})(V,m,!1)})(Oe);var Be={exports:{}};(function(m){(function(R,_,y){function I(d){var a=this,s="";a.next=function(){var i=a.b,c=a.c,g=a.d,E=a.a;return i=i<<25^i>>>7^c,c=c-g|0,g=g<<24^g>>>8^E,E=E-i|0,a.b=i=i<<20^i>>>12^c,a.c=c=c-g|0,a.d=g<<16^c>>>16^E,a.a=E-i|0},a.a=0,a.b=0,a.c=-1640531527,a.d=1367130551,d===Math.floor(d)?(a.a=d/4294967296|0,a.b=d|0):s+=d;for(var v=0;v<s.length+20;v++)a.b^=s.charCodeAt(v)|0,a.next()}f(I,"XorGen");function A(d,a){return a.a=d.a,a.b=d.b,a.c=d.c,a.d=d.d,a}f(A,"copy");function S(d,a){var s=new I(d),v=a&&a.state,i=f(function(){return(s.next()>>>0)/4294967296},"prng");return i.double=function(){do var c=s.next()>>>11,g=(s.next()>>>0)/4294967296,E=(c+g)/(1<<21);while(E===0);return E},i.int32=s.next,i.quick=i,v&&(typeof v=="object"&&A(v,s),i.state=function(){return A(s,{})}),i}f(S,"impl"),_&&_.exports?_.exports=S:y&&y.amd?y(function(){return S}):this.tychei=S})(V,m,!1)})(Be);var Pe={exports:{}},cr={},sr=Object.freeze({__proto__:null,default:cr}),lr=he(sr);(function(m){(function(R,_,y){var I=256,A=6,S=52,d="random",a=y.pow(I,A),s=y.pow(2,S),v=s*2,i=I-1,c;function g(O,h,T){var D=[];h=h==!0?{entropy:!0}:h||{};var C=j(L(h.entropy?[O,q(_)]:O==null?P():O,3),D),M=new E(D),z=f(function(){for(var Y=M.g(A),W=a,k=0;Y<s;)Y=(Y+k)*I,W*=I,k=M.g(1);for(;Y>=v;)Y/=2,W/=2,k>>>=1;return(Y+k)/W},"prng");return z.int32=function(){return M.g(4)|0},z.quick=function(){return M.g(4)/4294967296},z.double=z,j(q(M.S),_),(h.pass||T||function(Y,W,k,K){return K&&(K.S&&$(K,M),Y.state=function(){return $(M,{})}),k?(y[d]=Y,W):Y})(z,C,"global"in h?h.global:this==y,h.state)}f(g,"seedrandom");function E(O){var h,T=O.length,D=this,C=0,M=D.i=D.j=0,z=D.S=[];for(T||(O=[T++]);C<I;)z[C]=C++;for(C=0;C<I;C++)z[C]=z[M=i&M+O[C%T]+(h=z[C])],z[M]=h;(D.g=function(Y){for(var W,k=0,K=D.i,H=D.j,Z=D.S;Y--;)W=Z[K=i&K+1],k=k*I+Z[i&(Z[K]=Z[H=i&H+W])+(Z[H]=W)];return D.i=K,D.j=H,k})(I)}f(E,"ARC4");function $(O,h){return h.i=O.i,h.j=O.j,h.S=O.S.slice(),h}f($,"copy");function L(O,h){var T=[],D=typeof O,C;if(h&&D=="object")for(C in O)try{T.push(L(O[C],h-1))}catch{}return T.length?T:D=="string"?O:O+"\0"}f(L,"flatten");function j(O,h){for(var T=O+"",D,C=0;C<T.length;)h[i&C]=i&(D^=h[i&C]*19)+T.charCodeAt(C++);return q(h)}f(j,"mixkey");function P(){try{var O;return c&&(O=c.randomBytes)?O=O(I):(O=new Uint8Array(I),(R.crypto||R.msCrypto).getRandomValues(O)),q(O)}catch{var h=R.navigator,T=h&&h.plugins;return[+new Date,R,T,R.screen,q(_)]}}f(P,"autoseed");function q(O){return String.fromCharCode.apply(0,O)}if(f(q,"tostring"),j(y.random(),_),m.exports){m.exports=g;try{c=lr}catch{}}else y["seed"+d]=g})(typeof self<"u"?self:V,[],Math)})(Pe);var dr=Ne.exports,vr=De.exports,hr=Te.exports,yr=Ce.exports,pr=Oe.exports,gr=Be.exports,te=Pe.exports;te.alea=dr,te.xor128=vr,te.xorwow=hr,te.xorshift7=yr,te.xor4096=pr,te.tychei=gr;var mr=te;function*Le(m,R){let _=0;for(const y of R)_++<m||(yield y)}f(Le,"skip");var Me=f(m=>{const R=mr(m),_={chooseOne(y){if(y instanceof Map||y instanceof Set){const I=Math.floor(R()*y.size),{value:A}=Le(I,y.keys()).next();return A}else{const I=y instanceof Array?y:[...y];return I[Math.floor(R()*I.length)]}},removeOne(y){if(y instanceof Map){const I=_.chooseOne(y),A=y.get(I);return y.delete(I),A}else if(y instanceof Set){const I=_.chooseOne(y);return y.delete(I),I}else{const I=Math.floor(R()*y.length),A=y[I];return y.splice(I,1),A}},*randomIterator(y){if(y instanceof Map||y instanceof Set){const I=Math.floor(R()*y.size);yield*Le(I,y.keys())}else{const I=y instanceof Array?y:[...y],A=Math.floor(R()*I.length);for(let S=0;S<I.length;S++)yield I[(A+S)%I.length]}}};return _},"Random");function*br(m,R,_){for(const y of pe(m,R)){const{coordinate:I}=y,A=_.has(J(I));yield{neighbour:y,connected:A}}}f(br,"PartitionNeighbours");const Fe=f((m,R,_)=>{var y;(y=m[R])!=null||(m[R]=0),m[R]|=_},"addConnection");function*wr({size:m,seed:R}){const{chooseOne:_,removeOne:y}=Me(R),I=[...Ue(m)],A={},S=new Set,d=new Map,a=_(I);S.add(J(a));for(const{coordinate:s}of pe(m,a))d.set(J(s),s);for(;S.size<I.length;){if(d.size===0)throw new Error("working set unexpectedly empty");const s=y(d),v=J(s),i=[...br(m,s,S)],c=i.filter(({connected:P})=>P),{neighbour:{coordinate:g,direction:E}}=_(c),{forwards:$,backwards:L}=ze(E),j=J(g);Fe(A,v,$),Fe(A,j,L),S.add(v);for(const{neighbour:{coordinate:P}}of i.filter(({connected:q})=>!q))d.set(J(P),P)}for(const s of I){const v=A[J(s)],i=_(Ae),c=$e(v);yield{coordinate:s,orientation:i,connection:c}}}f(wr,"Prims");function*_r({size:m,seed:R}){const{chooseOne:_,randomIterator:y,removeOne:I}=Me(R),A=f((v,i)=>y(pe(v,i)).next().value,"RandomNeighbour"),S=f((v,i)=>{const c=new Map,g=J(v);let E=[{key:g,coordinate:v,forwards:0,backwards:0}];for(c.set(g,v);;){const $=E.at(-1).coordinate,{coordinate:L,direction:j}=A(m,$),P=J(L);if(c.has(P)){const O=E.findIndex(({key:h})=>h===P)+1;for(let h=O;h<E.length;h++){const{key:T}=E[h];c.delete(T)}E=E.slice(0,O);continue}else{const{forwards:O,backwards:h}=ze(j);if(E.at(-1).forwards=O,E.push({key:P,coordinate:L,forwards:0,backwards:h}),!i.has(P))return E;c.set(P,L)}}},"loopErasedRandomWalk"),d=[...Ue(m)],a={},s=new Map;for(const v of d)s.set(J(v),v);for(I(s);s.size>0;){const v=I(s),i=S(v,s);for(const{key:c,forwards:g,backwards:E}of i)s.delete(c),a[c]|=g|E}for(const v of d){const i=a[J(v)],c=_(Ae),g=$e(i);yield{coordinate:v,orientation:c,connection:g}}}f(_r,"Wilsons");const $e=f(m=>{if(m===0)throw new Error("connection cannot be empty");if(m===63)return 63;for(;!(m&32)||m&1;){const _=m&32;m<<=1,m&=63,_&&(m|=1)}const R=(m&30)>>1;switch(R){case 0:return 32;case 8:return 48;case 4:return 40;case 2:return 36;case 1:return 40;case 12:return 56;case 6:return 44;case 3:return 52;case 9:return 44;case 10:return 52;case 5:return 42;case 14:return 60;case 7:return 46;case 11:return 54;case 13:return 46;case 15:return 62;default:throw new Error(`unhandled truncated case ${R.toString(2)} from connection ${m.toString(2)}`)}},"normalizeConnection");function*xr({q:m,r:R,s:_}){yield{coordinate:{q:m,r:R-1,s:_+1},direction:0},yield{coordinate:{q:m+1,r:R-1,s:_},direction:1},yield{coordinate:{q:m+1,r:R,s:_-1},direction:2},yield{coordinate:{q:m,r:R+1,s:_-1},direction:3},yield{coordinate:{q:m-1,r:R+1,s:_},direction:4},yield{coordinate:{q:m-1,r:R,s:_+1},direction:5}}f(xr,"Neighbours");function*pe(m,R){for(const _ of xr(R)){const{coordinate:{q:y,r:I,s:A}}=_;y<-m||y>m||I<-m||I>m||A<-m||A>m||(yield _)}}f(pe,"ValidNeighbours");function*Ue(m){for(let R=-m;R<=m;R++)for(let _=-m;_<=m;_++){const y=-R-_;-m<=y&&y<=m&&(yield{q:R,r:_,s:y})}}f(Ue,"CoordinatesGenerator");const ze=f(m=>({forwards:32>>m,backwards:32>>(m+3)%6}),"asConnections");function*Sr(m){const{mode:R}=m;switch(R){case"prims":yield*wr(m);return;case"wilsons":yield*_r(m);return}}f(Sr,"PuzzleGenerator");const ge=ye.exports.createInstance({driver:ye.exports.INDEXEDDB,name:"hexpanse",version:1,storeName:"gameState"}),Er=f(m=>{postMessage(m)},"reply");let se,le,oe;onmessage=f(async({data:m})=>{switch(m.type){case"restore":{se=m.config,le=ur(se);const R=await ge.getItem(le);if(R)oe=R;else{oe={};for(const{coordinate:_,orientation:y,connection:I}of Sr(se))oe[J(_)]={coordinate:_,orientation:y,connection:I};await ge.setItem(le,oe)}return Er({type:"restored",config:se,state:oe})}case"update cell":{const{coordinate:R,orientation:_}=m,y=oe[J(R)];y&&(y.orientation=_,await ge.setItem(le,oe));return}}},"onmessage")})();
